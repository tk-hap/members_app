{% extends "base.xml" %}
{% load static %}
{% load duration_filters %}

{% block styles %}
{% include "exercise_class/styles.xml" %}
{% endblock %}

{% block header %}
<image style="appbar-icon-leading" source="{% static 'icons/arrow_back.png' %}" action="back" href="#">
  <behavior action="dispatch-event" event-name="reload-home"/>
</image>
<text style="appbar-headline-centered">{{ class_details.class_name }}</text>
<image style="appbar-icon-trailing" source="{% static 'icons/calendar_add.png' %}" href="{% url 'save-to-calendar' class_details.id %}" verb="get" action="new"/>
{% endblock %}

{% block content %}
<view>
  <view style="class-details">
    <view style="class-icon-container">
      <image style="class-details-icon" source="{% static 'icons/event.png' %}" />
    </view>
    <view style="class-item-text">
      <text style="item-headline">Date</text>
      <text style="item-supporting-text">{{ class_details.scheduled_date }}</text>
    </view>
  </view>
  <view style="class-details">
    <view style="class-icon-container">
      <image style="class-details-icon" source="{% static 'icons/schedule.png' %}" />
    </view>
    <view style="class-item-text">
      <text style="item-headline">Time</text>
      <text style="item-supporting-text">{{ class_details.start_time }} - {{ class_details.end_time }}</text>
    </view>
  </view>
  <view style="class-details">
    <view style="class-icon-container">
      <image style="class-details-icon" source="{% static 'icons/location.png' %}" />
    </view>
    <view style="class-item-text">
      <text style="item-headline">Location</text>
      <text style="item-supporting-text">{{ class_details.location }}</text>
    </view>
  </view>
  <view style="class-details">
    <view style="class-icon-container">
      <image style="class-details-icon" source="{% static 'icons/person.png' %}" />
    </view>
    <view style="class-item-text">
      <text style="item-headline">Trainer</text>
      <text style="item-supporting-text">{{ class_details.trainer }}</text>
    </view>
  </view>
</view>
</view>
<view>
    <view scroll="true" content-container-style="scroll-view">
      <view>
        <text style="basic-font" preformatted="true">{{ class_details.description }}</text>
      </view>
    </view>
</view>
{% if status == "booked" %}
<view style="button-filled" href="{% url 'cancel-booking' class_details.id %}" verb="post" action="replace">
  <text style="button-filled-label">Cancel Booking</text>
</view>
{% elif status == "available" %}
<view style="button-filled" href="{% url 'book' class_details.id %}" verb="post" action="replace">
  <text style="button-filled-label">Book</text>
</view>
{% else %}
<view style="button-filled button-disabled">
  <text style="button-filled-label button-disabled-label">Unavailable</text>
</view>
{% endif %}
{% endblock %}